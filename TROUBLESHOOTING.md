# Устранение проблем с блоками

## Проблема: Блоки не видны в редакторе

### Шаг 1: Проверьте активацию плагина

1. Перейдите в админку WordPress: `/wp-admin/`
2. Откройте `Плагины` → `Установленные плагины`
3. Найдите **Auto Import Core**
4. Убедитесь что статус: **Активирован**
5. Если не активирован - нажмите "Активировать"

### Шаг 2: Очистите весь кеш

**Кеш браузера:**
- Windows/Linux: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`
- Или откройте в режиме инкогнито

**Кеш WordPress:**
Если используете плагины кеширования (WP Super Cache, W3 Total Cache и т.д.):
1. Найдите плагин в списке плагинов
2. Очистите кеш через его настройки
3. Или временно деактивируйте для проверки

**Кеш хостинга:**
Если на хостинге есть свой кеш (например, у Cloudflare):
1. Зайдите в панель управления хостингом
2. Найдите раздел "Кеш" или "Cache"
3. Очистите кеш

### Шаг 3: Проверьте версию WordPress

Блоки требуют **WordPress 6.0 или выше**.

**Проверить версию:**
1. В админке: `Консоль` → внизу справа номер версии
2. Или в `Консоль` → `Обновления`

**Если версия ниже 6.0:**
1. Сделайте резервную копию сайта
2. Обновите WordPress: `Консоль` → `Обновления` → `Обновить сейчас`

### Шаг 4: Проверьте консоль браузера

**Откройте консоль разработчика:**
1. В WordPress редакторе нажмите `F12` (или `Cmd+Option+I` на Mac)
2. Перейдите на вкладку **Console** (Консоль)
3. Посмотрите на сообщения

**Что искать:**

❌ **Красные ошибки** - это проблемы, которые нужно решить:

```
Failed to load resource: net::ERR_FILE_NOT_FOUND
.../blocks/hero/index.js
```
↑ Значит файл блока не найден - проверьте что все файлы скопированы

```
Uncaught TypeError: Cannot read property 'registerBlockType' of undefined
```
↑ Значит WordPress библиотеки не загружены - проверьте версию WP

⚠️ **Жёлтые предупреждения** - обычно не критичны

✅ **Нет ошибок** - отлично! Идём дальше

### Шаг 5: Проверьте загрузку файлов

**В консоли браузера:**
1. Перейдите на вкладку **Network** (Сеть)
2. Обновите страницу (`F5`)
3. В фильтре выберите **JS**
4. Найдите файлы блоков:
   - `blocks.js`
   - `hero/index.js`
   - `trust-bar/index.js`
   - `car-grid/index.js`
   - `lead-form/index.js`
   - `articles-grid/index.js`
   - `faq/index.js`

**Проверьте статус:**
- ✅ Статус **200** - файл загружен успешно
- ❌ Статус **404** - файл не найден (проверьте структуру папок)
- ❌ Статус **403** - нет доступа (проверьте права на файлы)
- ❌ Статус **500** - ошибка сервера (проверьте логи PHP)

### Шаг 6: Проверьте структуру файлов

Убедитесь что структура плагина правильная:

```
wp-content/
└── plugins/
    └── auto-import-core/
        ├── auto-import-core.php  ← Главный файл плагина
        ├── blocks/
        │   ├── hero/
        │   │   ├── block.json
        │   │   ├── index.js      ← JavaScript блока
        │   │   └── render.php    ← PHP рендер
        │   ├── trust-bar/
        │   │   ├── block.json
        │   │   ├── index.js
        │   │   └── render.php
        │   └── ... (другие блоки)
        ├── assets/
        │   ├── css/
        │   │   └── admin.css
        │   └── js/
        │       ├── admin.js
        │       └── blocks.js      ← Общий файл блоков
        └── includes/
            └── ... (классы)
```

**Как проверить:**
1. Подключитесь к хостингу через FTP или File Manager
2. Откройте папку `/wp-content/plugins/auto-import-core/`
3. Убедитесь что все папки и файлы на месте

### Шаг 7: Проверьте права доступа к файлам

**Правильные права:**
- Папки: `755` или `750`
- Файлы: `644` или `640`

**Как исправить через FTP:**
1. Выделите папку `auto-import-core`
2. Правый клик → Права доступа (или CHMOD)
3. Установите `755` для папок
4. Установите `644` для файлов
5. Примените рекурсивно

**Через SSH:**
```bash
cd /path/to/wordpress/wp-content/plugins/auto-import-core
find . -type d -exec chmod 755 {} \;
find . -type f -exec chmod 644 {} \;
```

### Шаг 8: Проверьте конфликты с другими плагинами

**Временно деактивируйте другие плагины:**
1. `Плагины` → `Установленные плагины`
2. Деактивируйте ВСЕ плагины кроме **Auto Import Core**
3. Проверьте появились ли блоки
4. Если да - активируйте плагины по одному чтобы найти конфликтующий

**Частые конфликты:**
- Page Builder плагины (Elementor, Divi)
- Старые Gutenberg расширения
- Плагины оптимизации JavaScript

### Шаг 9: Проверьте тему

**Переключитесь на стандартную тему:**
1. `Внешний вид` → `Темы`
2. Активируйте стандартную тему WordPress (Twenty Twenty-Four)
3. Проверьте блоки
4. Если работает - проблема в теме Auto Import

**Если проблема в теме Auto Import:**
1. Проверьте что тема активирована правильно
2. Проверьте файл `functions.php` на ошибки
3. Откройте логи PHP

### Шаг 10: Проверьте PHP логи

**Включите debug режим:**

Откройте `wp-config.php` и добавьте:

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
```

**Проверьте логи:**
1. Файл логов: `/wp-content/debug.log`
2. Откройте через FTP или File Manager
3. Посмотрите последние записи

**Частые ошибки:**
```
PHP Fatal error: Cannot redeclare...
```
↑ Конфликт имён - проверьте нет ли дублирования плагинов

```
PHP Parse error: syntax error...
```
↑ Ошибка синтаксиса PHP - проверьте версию PHP (должна быть 7.4+)

## Решение: Блоки видны в редакторе, но не на сайте

### Проблема с рендерингом

Блоки используют **серверный рендеринг** (файлы `render.php`).

**Проверьте:**

1. **Файлы render.php существуют:**
   ```
   blocks/hero/render.php
   blocks/trust-bar/render.php
   blocks/car-grid/render.php
   и т.д.
   ```

2. **Права на файлы правильные** (644)

3. **Нет PHP ошибок в render.php:**
   - Включите WP_DEBUG
   - Проверьте debug.log

### Проблема с Car Grid

Если блок **Car Grid** пустой:

1. **Добавьте автомобили:**
   - `Автомобили` → `Добавить новый`
   - Заполните все поля
   - ✅ **Обязательно отметьте**: "Показывать в каталоге"
   - Загрузите фото
   - Опубликуйте

2. **Проверьте статус:**
   - Автомобиль должен быть **Опубликован** (не черновик)
   - Должна стоять галочка "Показывать в каталоге"

### Проблема с Lead Form

Если форма заявки не отправляется:

1. **Проверьте REST API:**
   - Откройте в браузере: `ваш-сайт.com/wp-json/aic/v1/`
   - Должен быть ответ (не 404)

2. **Проверьте JavaScript:**
   - Консоль браузера → вкладка Console
   - Не должно быть ошибок при отправке формы

3. **Проверьте файл blocks.js:**
   - Путь: `/wp-content/plugins/auto-import-core/assets/js/blocks.js`
   - Должен существовать и загружаться

## Решение: Нет стилей у блоков

### Проблема с CSS

1. **Проверьте что тема активирована:**
   - `Внешний вид` → `Темы`
   - **Auto Import** должна быть активна

2. **Проверьте загрузку style.css:**
   - F12 → Network → фильтр CSS
   - Должен загружаться `style.css` темы

3. **Проверьте файлы CSS:**
   ```
   themes/auto-import/assets/css/
   ├── tokens.css
   ├── base.css
   ├── layout.css
   ├── components.css
   └── pages.css
   ```

4. **Очистите кеш:**
   - Браузера (Ctrl+Shift+R)
   - WordPress плагина кеширования
   - Хостинга

## Быстрое решение: Переустановка

Если ничего не помогло:

1. **Сделайте резервную копию базы данных**

2. **Удалите плагин:**
   - `Плагины` → **Auto Import Core**
   - Деактивировать → Удалить

3. **Удалите тему:**
   - `Внешний вид` → `Темы`
   - Удалите **Auto Import**

4. **Очистите папки вручную через FTP:**
   - Удалите `/wp-content/plugins/auto-import-core/`
   - Удалите `/wp-content/themes/auto-import/`

5. **Установите заново:**
   - Скачайте свежие файлы из GitHub
   - Загрузите через админку или FTP
   - Активируйте плагин и тему

6. **Проверьте блоки:**
   - Создайте новую страницу
   - Нажмите `+`
   - Найдите категорию "Auto Import Blocks"

## Всё ещё не работает?

### Соберите информацию для диагностики

1. **Версия WordPress:**
   - `Консоль` → справа внизу

2. **Версия PHP:**
   - `Инструменты` → `Здоровье сайта` → `Информация` → `Сервер`

3. **Список активных плагинов:**
   - `Плагины` → скриншот списка

4. **Ошибки из консоли браузера:**
   - F12 → Console → скопируйте все красные сообщения

5. **Ошибки из debug.log:**
   - Последние 20-30 строк

6. **Скриншот редактора:**
   - Где должны быть блоки

### Создайте Issue на GitHub

1. Перейдите: https://github.com/Volkofff666/auto-import-wordpress/issues
2. Нажмите "New Issue"
3. Укажите:
   - Описание проблемы
   - Шаги которые вы уже попробовали
   - Собранную информацию выше
   - Скриншоты

## Контакты

- GitHub: https://github.com/Volkofff666/auto-import-wordpress
- Issues: https://github.com/Volkofff666/auto-import-wordpress/issues