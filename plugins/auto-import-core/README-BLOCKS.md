# Блоки Auto Import

## Важно!

Блоки написаны на чистом JavaScript без сборки (без npm/webpack).
Они используют глобальные переменные WordPress (`wp.blocks`, `wp.element` и т.д.).

## Если блоки не видны в редакторе

### 1. Проверьте активацию плагина
```
Плагины → Auto Import Core → должен быть активен
```

### 2. Очистите кеш
- Кеш браузера: Ctrl+Shift+R (Windows) или Cmd+Shift+R (Mac)
- Кеш WordPress: если используете плагин кеширования - очистите его

### 3. Проверьте в консоли браузера
1. Откройте страницу редактирования в WordPress
2. Нажмите F12 (открыть консоль)
3. Посмотрите на ошибки (красные сообщения)
4. Если есть ошибки - скопируйте и отправьте для диагностики

### 4. Проверьте что JavaScript файлы загружаются
В консоли браузера (вкладка Network/Сеть) должны быть файлы:
- `hero/index.js`
- `trust-bar/index.js`
- `car-grid/index.js`
- и т.д.

### 5. Убедитесь что WordPress 6.0+
Блоки требуют WordPress 6.0 или новее.

## Как использовать блоки

1. Создайте новую страницу
2. Нажмите `+` для добавления блока
3. Найдите категорию **"Auto Import Blocks"**
4. Выберите нужный блок
5. Настройте его в правой панели (Inspector)
6. Сохраните страницу

## Список блоков

### aic/hero
Главный баннер с фоном, заголовком и кнопкой.

**Настройки:**
- Title (заголовок)
- Subtitle (подзаголовок)
- Button Text (текст кнопки)
- Button URL (ссылка кнопки)
- Background Image (фоновое изображение)

### aic/trust-bar
Блок с преимуществами компании (иконки + текст).

**Настройки:**
- Добавление/удаление элементов
- Выбор иконки для каждого элемента
- Текст для каждого элемента

### aic/car-grid
Сетка автомобилей из каталога.

**Настройки:**
- Posts Per Page (количество)
- Order By (сортировка: дата/цена/год)
- Order (порядок: DESC/ASC)

### aic/lead-form
Форма заявки.

**Настройки:**
- Title (заголовок)
- Subtitle (подзаголовок)

**Поля формы:**
- Имя (обязательно)
- Телефон (обязательно)
- Бюджет
- Комментарий

### aic/articles-grid
Сетка статей из блога.

**Настройки:**
- Posts Per Page (количество)
- Show Excerpt (показывать отрывок)
- Show Date (показывать дату)

### aic/faq
Аккордеон вопросов-ответов.

**Настройки:**
- Title (заголовок блока)
- Добавление/удаление вопросов
- Question (вопрос)
- Answer (ответ)

## Устранение неполадок

### Блоки отображаются в редакторе, но не на сайте

**Причина:** Блоки используют серверный рендеринг (render.php).

**Решение:**
1. Убедитесь что файлы `render.php` существуют в каждой папке блока
2. Проверьте права доступа к файлам (должны быть читаемы)
3. Для `car-grid` - добавьте автомобили с галочкой "Показывать в каталоге"

### Форма заявки не отправляется

**Проверьте:**
1. REST API работает: `/wp-json/aic/v1/` должен отвечать
2. В консоли браузера нет ошибок
3. JavaScript файл `blocks.js` подключен

### Стили блоков не применяются

**Проверьте:**
1. Тема активирована
2. Файл `style.css` темы загружается
3. Все CSS файлы из папки `assets/css/` существуют

## Разработка собственных блоков

Чтобы добавить свой блок:

1. Создайте папку в `blocks/my-block/`
2. Добавьте файлы:
   - `block.json` (метаданные)
   - `index.js` (логика редактора)
   - `render.php` (вывод на сайте)
3. Зарегистрируйте в `includes/Blocks/BlocksManager.php`

## Поддержка

Если проблема не решается:
1. Проверьте консоль браузера на ошибки
2. Проверьте логи PHP (wp-content/debug.log)
3. Создайте issue на GitHub с описанием проблемы